--
-- PostgreSQL database dump
--

-- Dumped from database version 9.4.4
-- Dumped by pg_dump version 9.5.1

-- Started on 2016-03-31 01:07:52

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

--
-- TOC entry 1 (class 3079 OID 11855)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2091 (class 0 OID 0)
-- Dependencies: 1
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: -
--


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 177 (class 1259 OID 32829)
-- Name: Category; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE "Category" (
    "UserId" integer,
    "CategoryId" integer NOT NULL
);


--
-- TOC entry 178 (class 1259 OID 32832)
-- Name: CategoryStatement; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE "CategoryStatement" (
    "CategoryId" integer,
    "StatementId" integer
);


--
-- TOC entry 188 (class 1259 OID 32880)
-- Name: Category_CategoryId_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "Category_CategoryId_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- TOC entry 2092 (class 0 OID 0)
-- Dependencies: 188
-- Name: Category_CategoryId_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "Category_CategoryId_seq" OWNED BY "Category"."CategoryId";


--
-- TOC entry 173 (class 1259 OID 32817)
-- Name: Rating; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE "Rating" (
    "UserId" integer,
    "StatementId" integer
);


--
-- TOC entry 2093 (class 0 OID 0)
-- Dependencies: 173
-- Name: TABLE "Rating"; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TABLE "Rating" IS 'Statement Rating
Links
User & Statement';


--
-- TOC entry 181 (class 1259 OID 32841)
-- Name: Reference; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE "Reference" (
    "ReferenceId" integer NOT NULL,
    "UserId" integer
);


--
-- TOC entry 184 (class 1259 OID 32853)
-- Name: Reference_ReferenceId_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "Reference_ReferenceId_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- TOC entry 2094 (class 0 OID 0)
-- Dependencies: 184
-- Name: Reference_ReferenceId_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "Reference_ReferenceId_seq" OWNED BY "Reference"."ReferenceId";


--
-- TOC entry 180 (class 1259 OID 32838)
-- Name: Referencing; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE "Referencing" (
    "ReferencingId" integer NOT NULL,
    "ReferenceId" integer,
    "StatementId" integer,
    "UserId" integer
);


--
-- TOC entry 187 (class 1259 OID 32874)
-- Name: Referencing_ReferencingId_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "Referencing_ReferencingId_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- TOC entry 2095 (class 0 OID 0)
-- Dependencies: 187
-- Name: Referencing_ReferencingId_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "Referencing_ReferencingId_seq" OWNED BY "Referencing"."ReferencingId";


--
-- TOC entry 179 (class 1259 OID 32835)
-- Name: Statement; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE "Statement" (
    "StatementId" integer NOT NULL,
    "UserId" integer
);


--
-- TOC entry 2096 (class 0 OID 0)
-- Dependencies: 179
-- Name: COLUMN "Statement"."StatementId"; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN "Statement"."StatementId" IS '
';


--
-- TOC entry 174 (class 1259 OID 32820)
-- Name: StatementTag; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE "StatementTag" (
    "StatementId" integer,
    "UserId" integer,
    "TagId" integer
);


--
-- TOC entry 186 (class 1259 OID 32865)
-- Name: Statement_StatementId_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "Statement_StatementId_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- TOC entry 2097 (class 0 OID 0)
-- Dependencies: 186
-- Name: Statement_StatementId_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "Statement_StatementId_seq" OWNED BY "Statement"."StatementId";


--
-- TOC entry 175 (class 1259 OID 32823)
-- Name: Tag; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE "Tag" (
    "TagId" integer NOT NULL
);


--
-- TOC entry 185 (class 1259 OID 32859)
-- Name: Tag_TagId_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "Tag_TagId_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- TOC entry 2098 (class 0 OID 0)
-- Dependencies: 185
-- Name: Tag_TagId_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "Tag_TagId_seq" OWNED BY "Tag"."TagId";


--
-- TOC entry 176 (class 1259 OID 32826)
-- Name: User; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE "User" (
    "UserId" integer NOT NULL,
    "OtherName" character(100),
    "LastName" character(50),
    "EmaiAddress" character varying(150),
    "Password" character varying(100),
    "Created" date
);


--
-- TOC entry 2099 (class 0 OID 0)
-- Dependencies: 176
-- Name: COLUMN "User"."UserId"; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN "User"."UserId" IS 'UserId - Auto Incrementing';


--
-- TOC entry 2100 (class 0 OID 0)
-- Dependencies: 176
-- Name: COLUMN "User"."EmaiAddress"; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN "User"."EmaiAddress" IS 'User''s email address';


--
-- TOC entry 2101 (class 0 OID 0)
-- Dependencies: 176
-- Name: COLUMN "User"."Password"; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN "User"."Password" IS 'User password, hashed and salted with BCrypt()';


--
-- TOC entry 2102 (class 0 OID 0)
-- Dependencies: 176
-- Name: COLUMN "User"."Created"; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON COLUMN "User"."Created" IS 'Account creation date
';


--
-- TOC entry 183 (class 1259 OID 32847)
-- Name: User_UserId_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "User_UserId_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- TOC entry 2103 (class 0 OID 0)
-- Dependencies: 183
-- Name: User_UserId_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "User_UserId_seq" OWNED BY "User"."UserId";


--
-- TOC entry 182 (class 1259 OID 32844)
-- Name: Voting; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE "Voting" (
    "VotingId" integer NOT NULL,
    "UserId" integer,
    "ReferencingId" integer
);


--
-- TOC entry 189 (class 1259 OID 32887)
-- Name: Voting_VotingId_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "Voting_VotingId_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- TOC entry 2104 (class 0 OID 0)
-- Dependencies: 189
-- Name: Voting_VotingId_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "Voting_VotingId_seq" OWNED BY "Voting"."VotingId";


--
-- TOC entry 1931 (class 2604 OID 32882)
-- Name: CategoryId; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Category" ALTER COLUMN "CategoryId" SET DEFAULT nextval('"Category_CategoryId_seq"'::regclass);


--
-- TOC entry 1934 (class 2604 OID 32855)
-- Name: ReferenceId; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Reference" ALTER COLUMN "ReferenceId" SET DEFAULT nextval('"Reference_ReferenceId_seq"'::regclass);


--
-- TOC entry 1933 (class 2604 OID 32876)
-- Name: ReferencingId; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Referencing" ALTER COLUMN "ReferencingId" SET DEFAULT nextval('"Referencing_ReferencingId_seq"'::regclass);


--
-- TOC entry 1932 (class 2604 OID 32867)
-- Name: StatementId; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Statement" ALTER COLUMN "StatementId" SET DEFAULT nextval('"Statement_StatementId_seq"'::regclass);


--
-- TOC entry 1929 (class 2604 OID 32861)
-- Name: TagId; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Tag" ALTER COLUMN "TagId" SET DEFAULT nextval('"Tag_TagId_seq"'::regclass);


--
-- TOC entry 1930 (class 2604 OID 32849)
-- Name: UserId; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "User" ALTER COLUMN "UserId" SET DEFAULT nextval('"User_UserId_seq"'::regclass);


--
-- TOC entry 1935 (class 2604 OID 32889)
-- Name: VotingId; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Voting" ALTER COLUMN "VotingId" SET DEFAULT nextval('"Voting_VotingId_seq"'::regclass);


--
-- TOC entry 1944 (class 2606 OID 32894)
-- Name: PK_Category; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Category"
    ADD CONSTRAINT "PK_Category" PRIMARY KEY ("CategoryId");


--
-- TOC entry 1955 (class 2606 OID 32896)
-- Name: PK_Reference; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Reference"
    ADD CONSTRAINT "PK_Reference" PRIMARY KEY ("ReferenceId");


--
-- TOC entry 1952 (class 2606 OID 32898)
-- Name: PK_Referencing; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Referencing"
    ADD CONSTRAINT "PK_Referencing" PRIMARY KEY ("ReferencingId");


--
-- TOC entry 1947 (class 2606 OID 32900)
-- Name: PK_Statement; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Statement"
    ADD CONSTRAINT "PK_Statement" PRIMARY KEY ("StatementId");


--
-- TOC entry 1940 (class 2606 OID 32902)
-- Name: PK_Tag; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Tag"
    ADD CONSTRAINT "PK_Tag" PRIMARY KEY ("TagId");


--
-- TOC entry 1942 (class 2606 OID 32906)
-- Name: PK_User; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "User"
    ADD CONSTRAINT "PK_User" PRIMARY KEY ("UserId");


--
-- TOC entry 1959 (class 2606 OID 32904)
-- Name: PK_Voting; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Voting"
    ADD CONSTRAINT "PK_Voting" PRIMARY KEY ("VotingId");


--
-- TOC entry 1948 (class 1259 OID 41031)
-- Name: FKI_Reference_Referencing; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX "FKI_Reference_Referencing" ON "Referencing" USING btree ("ReferenceId");


--
-- TOC entry 1956 (class 1259 OID 41073)
-- Name: FKI_Referencing_Voting; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX "FKI_Referencing_Voting" ON "Voting" USING btree ("ReferencingId");


--
-- TOC entry 1949 (class 1259 OID 41025)
-- Name: FKI_Statement_Referencing; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX "FKI_Statement_Referencing" ON "Referencing" USING btree ("StatementId");


--
-- TOC entry 1936 (class 1259 OID 41049)
-- Name: FKI_Statement_ST; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX "FKI_Statement_ST" ON "StatementTag" USING btree ("StatementId");


--
-- TOC entry 1937 (class 1259 OID 41055)
-- Name: FKI_Tag_ST; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX "FKI_Tag_ST" ON "StatementTag" USING btree ("TagId");


--
-- TOC entry 1953 (class 1259 OID 41019)
-- Name: FKI_User_Reference; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX "FKI_User_Reference" ON "Reference" USING btree ("UserId");


--
-- TOC entry 1950 (class 1259 OID 41037)
-- Name: FKI_User_Referencing; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX "FKI_User_Referencing" ON "Referencing" USING btree ("UserId");


--
-- TOC entry 1938 (class 1259 OID 41061)
-- Name: FKI_User_ST; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX "FKI_User_ST" ON "StatementTag" USING btree ("UserId");


--
-- TOC entry 1945 (class 1259 OID 41043)
-- Name: FKI_User_Statement; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX "FKI_User_Statement" ON "Statement" USING btree ("UserId");


--
-- TOC entry 1957 (class 1259 OID 41067)
-- Name: FKI_User_Voting; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX "FKI_User_Voting" ON "Voting" USING btree ("UserId");


--
-- TOC entry 1966 (class 2606 OID 32912)
-- Name: FK_Category_CS; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "CategoryStatement"
    ADD CONSTRAINT "FK_Category_CS" FOREIGN KEY ("CategoryId") REFERENCES "Category"("CategoryId");


--
-- TOC entry 1970 (class 2606 OID 41026)
-- Name: FK_Reference_Referencing; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Referencing"
    ADD CONSTRAINT "FK_Reference_Referencing" FOREIGN KEY ("ReferenceId") REFERENCES "Reference"("ReferenceId");


--
-- TOC entry 1974 (class 2606 OID 41068)
-- Name: FK_Referencing_Voting; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Voting"
    ADD CONSTRAINT "FK_Referencing_Voting" FOREIGN KEY ("ReferencingId") REFERENCES "Referencing"("ReferencingId");


--
-- TOC entry 1967 (class 2606 OID 32917)
-- Name: FK_Statement_CS; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "CategoryStatement"
    ADD CONSTRAINT "FK_Statement_CS" FOREIGN KEY ("StatementId") REFERENCES "Statement"("StatementId");


--
-- TOC entry 1961 (class 2606 OID 41009)
-- Name: FK_Statement_Rating; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Rating"
    ADD CONSTRAINT "FK_Statement_Rating" FOREIGN KEY ("StatementId") REFERENCES "Statement"("StatementId");


--
-- TOC entry 1969 (class 2606 OID 41020)
-- Name: FK_Statement_Referencing; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Referencing"
    ADD CONSTRAINT "FK_Statement_Referencing" FOREIGN KEY ("StatementId") REFERENCES "Statement"("StatementId");


--
-- TOC entry 1962 (class 2606 OID 41044)
-- Name: FK_Statement_ST; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "StatementTag"
    ADD CONSTRAINT "FK_Statement_ST" FOREIGN KEY ("StatementId") REFERENCES "Statement"("StatementId");


--
-- TOC entry 1963 (class 2606 OID 41050)
-- Name: FK_Tag_ST; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "StatementTag"
    ADD CONSTRAINT "FK_Tag_ST" FOREIGN KEY ("TagId") REFERENCES "Tag"("TagId");


--
-- TOC entry 1965 (class 2606 OID 32907)
-- Name: FK_User_Category; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Category"
    ADD CONSTRAINT "FK_User_Category" FOREIGN KEY ("UserId") REFERENCES "User"("UserId");


--
-- TOC entry 1960 (class 2606 OID 32922)
-- Name: FK_User_Reference; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Rating"
    ADD CONSTRAINT "FK_User_Reference" FOREIGN KEY ("UserId") REFERENCES "User"("UserId");


--
-- TOC entry 1972 (class 2606 OID 41014)
-- Name: FK_User_Reference; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Reference"
    ADD CONSTRAINT "FK_User_Reference" FOREIGN KEY ("UserId") REFERENCES "User"("UserId");


--
-- TOC entry 1971 (class 2606 OID 41032)
-- Name: FK_User_Referencing; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Referencing"
    ADD CONSTRAINT "FK_User_Referencing" FOREIGN KEY ("UserId") REFERENCES "User"("UserId");


--
-- TOC entry 1964 (class 2606 OID 41056)
-- Name: FK_User_ST; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "StatementTag"
    ADD CONSTRAINT "FK_User_ST" FOREIGN KEY ("UserId") REFERENCES "User"("UserId");


--
-- TOC entry 1968 (class 2606 OID 41038)
-- Name: FK_User_Statement; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Statement"
    ADD CONSTRAINT "FK_User_Statement" FOREIGN KEY ("UserId") REFERENCES "User"("UserId");


--
-- TOC entry 1973 (class 2606 OID 41062)
-- Name: FK_User_Voting; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY "Voting"
    ADD CONSTRAINT "FK_User_Voting" FOREIGN KEY ("UserId") REFERENCES "User"("UserId");


--
-- TOC entry 2090 (class 0 OID 0)
-- Dependencies: 6
-- Name: public; Type: ACL; Schema: -; Owner: -
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


-- Completed on 2016-03-31 01:07:52

--
-- PostgreSQL database dump complete
--

